<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Статистика матча — панель</title>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue:wght@400;700&display=swap" rel="stylesheet">
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    body{
      background:#111;
      color:#eee;
      font-family:'Bebas Neue',Arial,sans-serif;
      padding:16px;
    }
    h1{font-size:28px;margin-bottom:10px}
    .row{display:flex;flex-wrap:wrap;gap:16px;margin-bottom:10px}
    .field{
      background:#222;
      padding:8px 10px;
      border-radius:6px;
      display:flex;
      align-items:center;
      gap:8px;
    }
    .label{min-width:170px;font-size:16px}
    .team-tag{width:70px;text-align:center;color:#ffec99}
    .btn{
      width:30px;height:30px;border-radius:4px;border:none;
      cursor:pointer;font-size:18px;font-weight:700;
      background:#444;color:#fff;
    }
    .btn:hover{background:#666}
    .valbox{min-width:36px;text-align:center;font-size:18px}
    .team-input{
      width:220px;padding:3px 6px;border-radius:4px;border:1px solid #555;
      background:#000;color:#fff;font-family:inherit;font-size:18px;
    }
    .url-box{
      margin-top:12px;font-size:14px;
    }
    .url{
      display:block;margin-top:4px;
      background:#000;padding:4px 6px;border-radius:4px;
      font-family:monospace;font-size:13px;
      word-break:break-all;
    }
    .toggle{
      padding:6px 14px;border-radius:6px;border:none;
      cursor:pointer;font-size:16px;font-weight:700;
      background:#2f9e44;color:#fff;
    }
    .toggle.off{background:#c92a2a;}
  </style>
</head>
<body>
  <h1>Статистика матча — панель управления</h1>

  <div class="row">
    <div class="field">
      <span class="label">Название команды 1</span>
      <input id="t1name" class="team-input" value="КОМАНДА 1">
    </div>
    <div class="field">
      <span class="label">Название команды 2</span>
      <input id="t2name" class="team-input" value="КОМАНДА 2">
    </div>
  </div>

  <!-- Броски -->
  <div class="row">
    <div class="field">
      <span class="label">Броски</span>

      <span class="team-tag">К1</span>
      <button class="btn" data-key="t1s" data-delta="-1">-</button>
      <span class="valbox" id="v-t1s">0</span>
      <button class="btn" data-key="t1s" data-delta="1">+</button>

      <span class="team-tag">К2</span>
      <button class="btn" data-key="t2s" data-delta="-1">-</button>
      <span class="valbox" id="v-t2s">0</span>
      <button class="btn" data-key="t2s" data-delta="1">+</button>
    </div>
  </div>

  <!-- Броски в створ -->
  <div class="row">
    <div class="field">
      <span class="label">Броски в створ</span>

      <span class="team-tag">К1</span>
      <button class="btn" data-key="t1on" data-delta="-1">-</button>
      <span class="valbox" id="v-t1on">0</span>
      <button class="btn" data-key="t1on" data-delta="1">+</button>

      <span class="team-tag">К2</span>
      <button class="btn" data-key="t2on" data-delta="-1">-</button>
      <span class="valbox" id="v-t2on">0</span>
      <button class="btn" data-key="t2on" data-delta="1">+</button>
    </div>
  </div>

  <!-- Вбрасывания -->
  <div class="row">
    <div class="field">
      <span class="label">Выигранные вбрасывания</span>

      <span class="team-tag">К1</span>
      <button class="btn" data-key="t1f" data-delta="-1">-</button>
      <span class="valbox" id="v-t1f">0</span>
      <button class="btn" data-key="t1f" data-delta="1">+</button>

      <span class="team-tag">К2</span>
      <button class="btn" data-key="t2f" data-delta="-1">-</button>
      <span class="valbox" id="v-t2f">0</span>
      <button class="btn" data-key="t2f" data-delta="1">+</button>
    </div>
  </div>

  <!-- Штрафные -->
  <div class="row">
    <div class="field">
      <span class="label">Штрафные минуты</span>

      <span class="team-tag">К1</span>
      <button class="btn" data-key="t1p" data-delta="-1">-</button>
      <span class="valbox" id="v-t1p">0</span>
      <button class="btn" data-key="t1p" data-delta="1">+</button>

      <span class="team-tag">К2</span>
      <button class="btn" data-key="t2p" data-delta="-1">-</button>
      <span class="valbox" id="v-t2p">0</span>
      <button class="btn" data-key="t2p" data-delta="1">+</button>
    </div>
  </div>

  <div class="row">
    <button id="toggle" class="toggle off">ТИТР ВЫКЛЮЧЕН</button>
  </div>

  <div class="url-box">
    URL для vMix (Web Browser input / Overlay):
    <span class="url" id="url"></span>
  </div>

  <script>
    const state = {t1s:0,t2s:0,t1on:0,t2on:0,t1f:0,t2f:0,t1p:0,t2p:0};
    let show = false;

    function clamp(v){return v<0?0:v;}

    function renderNumbers(){
      for (const k in state){
        document.getElementById('v-'+k).textContent = state[k];
      }
    }

    function buildUrl(){
      const base = location.origin + location.pathname.replace(/index\.html?$/,'') + 'title.html';
      const p = new URLSearchParams();
      p.set('show', show ? '1':'0');
      p.set('t1name', document.getElementById('t1name').value || 'КОМАНДА 1');
      p.set('t2name', document.getElementById('t2name').value || 'КОМАНДА 2');
      for (const k in state){
        p.set(k, state[k]);
      }
      const full = base + '?' + p.toString();
      document.getElementById('url').textContent = full;
    }

    document.querySelectorAll('.btn').forEach(btn=>{
      btn.addEventListener('click',()=>{
        const key = btn.dataset.key;
        const d = parseInt(btn.dataset.delta,10);
        state[key] = clamp(state[key]+d);
        renderNumbers();
        buildUrl();
      });
    });

    document.getElementById('t1name').addEventListener('input', buildUrl);
    document.getElementById('t2name').addEventListener('input', buildUrl);

    const toggle = document.getElementById('toggle');
    toggle.addEventListener('click',()=>{
      show = !show;
      if(show){
        toggle.textContent = 'ТИТР ВКЛЮЧЕН';
        toggle.classList.remove('off');
      }else{
        toggle.textContent = 'ТИТР ВЫКЛЮЧЕН';
        toggle.classList.add('off');
      }
      buildUrl();
    });

    renderNumbers();
    buildUrl();
  </script>
</body>
</html>
